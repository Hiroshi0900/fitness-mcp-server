# 筋トレ・ランニング記録管理MCPサーバー 設計書

## プロジェクト概要

### 目的
- **筋トレ（BIG3中心）** と **ランニング** の記録管理
- 目標達成をサポートするパーソナルトレーナー的システム
- MCPサーバーとして会話形式でのデータ分析・アドバイス提供

### 目標設定
- **筋トレ**: ベンチプレス100kg到達（現在95kg、体重72kg）
- **ランニング**: ハーフマラソン出場（7/12）、将来的にフルマラソン
- **完成期限**: 2025年8月まで

### 技術コンセプト
- **言語**: Go
- **アーキテクチャ**: クリーンアーキテクチャ
- **永続化**: SQLite（ローカル、無料）
- **開発手法**: TDD
- **設計**: 軽量DDD + 関数型プログラミング要素

## 技術選択の根拠

### SQLite選択理由
- **コスト**: 完全無料
- **シンプルさ**: ファイルベース、サーバー不要
- **ポータビリティ**: 単一ファイルでのデータ管理
- **Go対応**: 優秀なドライバー群（modernc.org/sqlite）

### イベントソーシング不採用理由
- 筋トレ記録は「状態遷移」より「事実の記録」
- 必要以上に複雑化し、完成リスクが上がる
- シンプルなCRUD操作で十分

### DDD軽量適用
- **採用**: Entity, Value Object, Repository
- **不採用**: 集約、ドメインサービス（過剰）
- **理由**: 複雑なビジネスルールが少ないため


### 残タスク状況
- [x] MCPをdocker化する（ベストプラクティスなのかわからないが）
- [x] リポジトリとクエリを完全に分離する
- [x] コマンドのディレクトリをクエリの形式（クエリの中にdtoなどのディレクトリがある）に合わせる
- [x] （可能であれば）sqliteのファイル実態はこのアプリケーションに持ちたい
    - このディレクトリ以外だとユーザーの環境に依存するのではないか？
- [x] READMEを充足させる
    - [x] MCPサーバの接続関連（Docker/ローカル両方に対応）
    - [x] Makefile
      - [x] 開発用サーバの起動
      - [x] テストコマンド・クエリの実行
      - [x] lint/testの実行（コンパイルチェックも含めて）
    - [x] 利用方法やAPIの説明