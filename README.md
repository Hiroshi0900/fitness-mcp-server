# Fitness MCP Server

ç­‹ãƒˆãƒ¬ï¼ˆBIG3ä¸­å¿ƒï¼‰ã¨ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°è¨˜éŒ²ç®¡ç†ã®ãŸã‚ã®MCPã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›®æ¨™

- **ç­‹ãƒˆãƒ¬**: ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹100kgåˆ°é”ï¼ˆç¾åœ¨95kgã€ä½“é‡72kgï¼‰
- **ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°**: ãƒãƒ¼ãƒ•ãƒãƒ©ã‚½ãƒ³å‡ºå ´ï¼ˆ7/12ï¼‰ã€å°†æ¥çš„ã«ãƒ•ãƒ«ãƒãƒ©ã‚½ãƒ³
- **å®ŒæˆæœŸé™**: 2025å¹´8æœˆã¾ã§

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **è¨€èª**: Go 1.23.4
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: SQLiteï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ï¼‰
- **MCPãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: [mcp-go](https://github.com/mark3labs/mcp-go)
- **é–‹ç™ºæ‰‹æ³•**: TDD + è»½é‡DDD

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
fitness-mcp-server/
â”œâ”€â”€ cmd/mcp/              # MCPã‚µãƒ¼ãƒãƒ¼ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ application/      # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”œâ”€â”€ command/      # ã‚³ãƒãƒ³ãƒ‰ï¼ˆæ›¸ãè¾¼ã¿æ“ä½œï¼‰
â”‚   â”‚   â””â”€â”€ query/        # ã‚¯ã‚¨ãƒªï¼ˆèª­ã¿è¾¼ã¿æ“ä½œï¼‰
â”‚   â”œâ”€â”€ domain/           # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”‚   â”œâ”€â”€ strength/     # ç­‹ãƒˆãƒ¬ãƒ‰ãƒ¡ã‚¤ãƒ³
â”‚   â”‚   â””â”€â”€ running/      # ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ‰ãƒ¡ã‚¤ãƒ³
â”‚   â”œâ”€â”€ infrastructure/   # ã‚¤ãƒ³ãƒ•ãƒ©å±¤
â”‚   â””â”€â”€ interface/        # ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å±¤
â”œâ”€â”€ data/                 # SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ docker-compose.yml    # Docker Composeè¨­å®š
â”œâ”€â”€ Dockerfile           # Dockerè¨­å®š
â””â”€â”€ Makefile            # é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰
```

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- Docker & Docker Compose
- Go 1.23+ ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚ï¼‰
- Make ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ã‚³ãƒãƒ³ãƒ‰ç°¡ç•¥åŒ–ã®ãŸã‚ï¼‰

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone <repository-url>
cd fitness-mcp-server
```

### 2. é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Makefileã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ
make dev-setup

# ç›´æ¥å®Ÿè¡Œã™ã‚‹å ´åˆ
./docker-run.sh build
```

### 3. MCPã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
# Dockerã§èµ·å‹•
make run
# ã¾ãŸã¯
./docker-run.sh run

# ãƒ­ãƒ¼ã‚«ãƒ«ã§èµ·å‹•ï¼ˆè¦Goç’°å¢ƒï¼‰
make build
./mcp
```

### 4. å‹•ä½œç¢ºèª

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make docker-test

# è¨˜éŒ²ãƒ†ã‚¹ãƒˆ
make test-record

# ã‚¯ã‚¨ãƒªãƒ†ã‚¹ãƒˆ  
make test-query
```

## ğŸ“‹ ä½¿ç”¨å¯èƒ½ãªMCPãƒ„ãƒ¼ãƒ«

MCPã‚µãƒ¼ãƒãƒ¼ã¯ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ï¼š

### 1. record_training - ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²

ç­‹ãƒˆãƒ¬ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

```json
{
  \"jsonrpc\": \"2.0\",
  \"id\": 1,
  \"method\": \"tools/call\",
  \"params\": {
    \"name\": \"record_training\",
    \"arguments\": {
      \"date\": \"2025-06-14\",
      \"exercises\": [
        {
          \"name\": \"ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹\",
          \"category\": \"Compound\",
          \"sets\": [
            {
              \"weight_kg\": 95,
              \"reps\": 8,
              \"rest_time_seconds\": 180,
              \"rpe\": 8
            }
          ]
        }
      ],
      \"notes\": \"èª¿å­è‰¯å¥½\"
    }
  }
}
```

### 2. get_personal_records - å€‹äººè¨˜éŒ²å–å¾—

å€‹äººè¨˜éŒ²ï¼ˆPRï¼‰ã‚’å–å¾—ã—ã¾ã™ã€‚

```json
{
  \"jsonrpc\": \"2.0\",
  \"id\": 2,
  \"method\": \"tools/call\",
  \"params\": {
    \"name\": \"get_personal_records\",
    \"arguments\": {
      \"exercise_name\": \"ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹\"  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€æŒ‡å®šã—ãªã„å ´åˆã¯å…¨ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚º
    }
  }
}
```

### 3. get_trainings_by_date_range - æœŸé–“åˆ¥ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å–å¾—

æŒ‡å®šæœŸé–“ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å±¥æ­´ã‚’å–å¾—ã—ã¾ã™ã€‚

```json
{
  \"jsonrpc\": \"2.0\",
  \"id\": 3,
  \"method\": \"tools/call\",
  \"params\": {
    \"name\": \"get_trainings_by_date_range\",
    \"arguments\": {
      \"start_date\": \"2025-06-01\",
      \"end_date\": \"2025-06-30\"
    }
  }
}
```

## ğŸ”§ MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¥ç¶šè¨­å®š

### è‡ªå‹•è¨­å®šï¼ˆæ¨å¥¨ï¼‰

**ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚¤ãƒŠãƒªã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ:**
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ & Claude Desktopè¨­å®š
make setup-claude-local
```

**Dockerã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ:**
```bash  
# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ & Claude Desktopè¨­å®š
make setup-claude-docker
```

**è¨­å®šç¢ºèª:**
```bash
make check-claude-config
```

### æ‰‹å‹•è¨­å®š

#### Claude Desktop ã§ã®è¨­å®š

Claude Desktopã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`config.json`ï¼‰ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
**Windows**: `%APPDATA%\\Claude\\claude_desktop_config.json`

```json
{
  \"mcpServers\": {
    \"fitness-mcp-server\": {
      \"command\": \"docker\",
      \"args\": [
        \"run\",
        \"--rm\",
        \"-i\",
        \"-v\",
        \"/path/to/fitness-mcp-server/data:/app/data\",
        \"fitness-mcp-server_fitness-mcp\"
      ],
      \"env\": {
        \"MCP_DATA_DIR\": \"/app/data\"
      }
    }
  }
}
```

**æ³¨æ„**: `/path/to/fitness-mcp-server`ã¯å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

### VS Code MCP Extension ã§ã®è¨­å®š

VS Codeã®MCPæ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆï¼š

```json
{
  \"mcp.servers\": {
    \"fitness-mcp-server\": {
      \"command\": \"./mcp\",
      \"args\": [],
      \"cwd\": \"/path/to/fitness-mcp-server\"
    }
  }
}
```

## ğŸ’» é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰

### Makefileã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

```bash
# ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
make help

# é–‹ç™ºç’°å¢ƒ
make dev-setup      # é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
make docker-dev     # é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚·ã‚§ãƒ«ï¼‰èµ·å‹•
make build          # ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰
make clean          # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

# ã‚µãƒ¼ãƒãƒ¼æ“ä½œ
make run            # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
make stop           # ã‚µãƒ¼ãƒãƒ¼åœæ­¢
make restart        # ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•
make logs           # ãƒ­ã‚°è¡¨ç¤º
make status         # çŠ¶æ…‹ç¢ºèª

# ãƒ†ã‚¹ãƒˆ
make test           # Goãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
make docker-test    # Dockerç’°å¢ƒã§MCPãƒ†ã‚¹ãƒˆ
make test-local     # ãƒ­ãƒ¼ã‚«ãƒ«ã§MCPãƒ†ã‚¹ãƒˆ
make test-record    # è¨˜éŒ²ãƒ†ã‚¹ãƒˆã®ã¿
make test-query     # ã‚¯ã‚¨ãƒªãƒ†ã‚¹ãƒˆã®ã¿

# å“è³ªãƒã‚§ãƒƒã‚¯
make lint           # é™çš„è§£æ
make check          # lint + test
make ci             # CIç”¨ï¼ˆå…¨ãƒã‚§ãƒƒã‚¯ï¼‰

# ãã®ä»–
make info           # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±è¡¨ç¤º
make docker-clean   # Dockerãƒªã‚½ãƒ¼ã‚¹å‰Šé™¤
```

### ç›´æ¥å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

```bash
# Dockeræ“ä½œ
./docker-run.sh build     # ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
./docker-run.sh run       # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
./docker-run.sh dev       # é–‹ç™ºãƒ¢ãƒ¼ãƒ‰
./docker-run.sh test      # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
./docker-run.sh clean     # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

# Docker ãƒ†ã‚¹ãƒˆ
./docker-test.sh test-all       # å…¨ãƒ†ã‚¹ãƒˆ
./docker-test.sh test-record    # è¨˜éŒ²ãƒ†ã‚¹ãƒˆ
./docker-test.sh test-query     # ã‚¯ã‚¨ãƒªãƒ†ã‚¹ãƒˆ
./docker-test.sh interactive    # ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰

# ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ
./local_test_query.sh     # ãƒ­ãƒ¼ã‚«ãƒ«MCPãƒ†ã‚¹ãƒˆ
./test_commands.sh        # åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
```

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### è¨­è¨ˆåŸå‰‡

- **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ä¾å­˜é–¢ä¿‚ã®é€†è»¢ã«ã‚ˆã‚Šä¿å®ˆæ€§ã‚’å‘ä¸Š
- **CQRSè»½é‡é©ç”¨**: ã‚³ãƒãƒ³ãƒ‰ï¼ˆæ›¸ãè¾¼ã¿ï¼‰ã¨ã‚¯ã‚¨ãƒªï¼ˆèª­ã¿è¾¼ã¿ï¼‰ã®åˆ†é›¢
- **è»½é‡DDD**: Entityã€Value Objectã€Repository ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨
- **TDD**: ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã«ã‚ˆã‚‹å“è³ªä¿è¨¼

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ

1. **Interface Layer**: MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€å¤–éƒ¨API
2. **Application Layer**: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã€DTOã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
3. **Domain Layer**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
4. **Infrastructure Layer**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

### SQLiteé¸æŠç†ç”±

- **ã‚³ã‚¹ãƒˆ**: å®Œå…¨ç„¡æ–™
- **ã‚·ãƒ³ãƒ—ãƒ«ã•**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã€ã‚µãƒ¼ãƒãƒ¼ä¸è¦
- **ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£**: å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- **Goå¯¾å¿œ**: å„ªç§€ãªãƒ‰ãƒ©ã‚¤ãƒãƒ¼ï¼ˆmodernc.org/sqliteï¼‰

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã¯ `internal/infrastructure/repository/sqlite/migrations/` ã«é…ç½®ã€‚

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆç¨®é¡

- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: `go test ./...`
- **MCPãƒ†ã‚¹ãƒˆ**: JSON-RPCãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã®å‹•ä½œç¢ºèª
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: Dockerç’°å¢ƒã§ã®å…¨ä½“å‹•ä½œç¢ºèª

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•

```bash
# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
make test

# MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ†ã‚¹ãƒˆ
make docker-test

# å…¨ãƒ†ã‚¹ãƒˆ
make ci
```

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒãƒ“ãƒ«ãƒ‰ã§ããªã„**
   ```bash
   make docker-clean
   make docker-build
   ```

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„**
   ```bash
   # dataãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
   ls -la ./data/
   ```

3. **MCPã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ããªã„**
   - Docker ComposeãŒæ­£å¸¸ã«èµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - ãƒãƒ¼ãƒˆã®ç«¶åˆãŒãªã„ã“ã¨ã‚’ç¢ºèª
   - ãƒ­ã‚°ã‚’ç¢ºèª: `make logs`

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

```bash
# è©³ç´°ãƒ­ã‚°è¡¨ç¤º
make logs

# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§ã‚·ã‚§ãƒ«èµ·å‹•
make docker-dev

# ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ç¢ºèª
make status
```

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å€‹äººåˆ©ç”¨ç›®çš„ã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ç¾åœ¨ã¯å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãŸã‚ã€å¤–éƒ¨ã‹ã‚‰ã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯å—ã‘ä»˜ã‘ã¦ã„ã¾ã›ã‚“ã€‚

## ğŸ“§ é€£çµ¡å…ˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹è³ªå•ã‚„ææ¡ˆãŒã‚ã‚‹å ´åˆã¯ã€GitHubã®Issueã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
